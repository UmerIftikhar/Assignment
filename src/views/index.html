<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>TAMPER JOURNEY PLANNER</title>

	<link rel="stylesheet" href="lib/select2/dist/css/select2.min.css">
	<link rel="stylesheet" href="lib/selectize/dist/css/selectize.default.css">
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	<link rel="stylesheet" href="lib/mdPickers/dist/mdPickers.min.css">
	<link rel="stylesheet" href="lib/angular-material/angular-material.min.css">
	<link rel='stylesheet prefetch' href='https://material.angularjs.org/1.1.3/docs.css'>
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700,400italic">
	<link rel="stylesheet" href="lib/bootstrap/dist/css/bootstrap.min.css">
	<link rel="stylesheet" href="lib/angular-ui-select/dist/select.min.css">
	<link rel="stylesheet" href="css/style.css">

	<script src="lib/angular/angular.min.js"></script>
	<script src='lib/angular-route/angular-route.min.js'></script>
	<script src='lib/angular-aria/angular-aria.min.js'></script>
	<script src='lib/angular-messages/angular-messages.min.js'></script>
	<script src='lib/angular-material/angular-material.min.js'></script>
	<script src='lib/svg-assets-cache.js/svg-assets-cache.js'></script>
	<script src='lib/mdPickers/dist/mdPickers.min.js'></script>
	<script src='lib/moment/min/moment.min.js'></script>
    <script src="lib/jquery/dist/jquery.min.js"></script>
    <script src="lib/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="lib/angular-sanitize/angular-sanitize.min.js"></script>
    <script src="lib/angular-ui-select/dist/select.min.js"></script>
    <script src="lib/angular-animate/angular-animate.min.js"></script>
    <script src="lib/angular-bootstrap/ui-bootstrap-tpls.min.js"></script>
    <script src="js/main.js"></script>
    <script src="js/service.js"></script>
    <script src="js/busLocation.js"></script>
	 <script src="js/retrieveAllStops.js"></script>
   <script src="js/retrieveShortestRoute.js"></script>
	<script src="lib/angular-google-maps/dist/angular-google-maps.min.js"></script>
	<script src="lib/lodash/lodash.min.js"></script>



</head>
<!-- AppCtrl is used by the slider -->
  <body ng-app="mainApp" ng-cloak layout="column" ng-controller="AppCtrl">

<!--Tool Bar For Desktop => Media Query defined in style.css file -->
		<md-toolbar class="desktop">
		  <div class="md-toolbar-tools">
			<md-button class="md-icon-button" aria-label="Side Panel" ng-click="openSideNavPanel()">
			  <md-tooltip>Side Panel</md-tooltip>
			  <md-icon class="md-default-theme" class="material-icons">menu</md-icon>
			</md-button>
			<md-button class="md-icon-button" aria-label="Icon">
			  <md-tooltip>User</md-tooltip>
			  <md-icon class="md-default-theme" md-svg-icon="images/fb.svg"></md-icon>
			</md-button>
			<h2>
			  <span>TECNOTREE</span>
			</h2>
			<md-input-container md-no-float class="md-accent" flex="50" style="padding-bottom:0px;margin-left:25px">
			   <md-icon style="color:wheat" class="material-icons">search</md-icon>
			   <input ng-model="searchInput" placeholder="Search here" style="color:wheat;padding-left:25px;margin-left:5px">
			</md-input-container>
			<span flex></span>
			<md-button class="md-icon-button" aria-label="User">
			  <md-tooltip>User</md-tooltip>
			  <img src="images/user.png" style="width:24px;height:24px;"/>
			</md-button>
			<md-button class="md-icon-button" aria-label="Messages">
			  <md-tooltip>Messages</md-tooltip>
			  <img src="images/messages.png" style="width:24px;height:24px;"/>
			</md-button>


		  </div>
		 </md-toolbar>
<!--Tool Bar For Tablet => Media Query defined in style.css file -->
		 <md-toolbar class="tablet">
		  <div class="md-toolbar-tools">
			<md-button class="md-icon-button" aria-label="Side Panel" ng-click="openSideNavPanel()">
			  <md-tooltip>Open Side Panel</md-tooltip>
			  <md-icon class="md-default-theme" class="material-icons">menu</md-icon>
			</md-button>
			<md-button class="md-icon-button" aria-label="Icon">
			  <md-tooltip>User</md-tooltip>
			  <md-icon class="md-default-theme" md-svg-icon="images/fb.svg"></md-icon>
			</md-button>
			<h2>
			  <span>TECNOTREE</span>
			</h2>
			<md-input-container md-no-float class="md-accent" flex="50" style="padding-bottom:0px;margin-left:25px">
			   <md-icon style="color:wheat" class="material-icons">search</md-icon>
			   <input ng-model="searchInput" placeholder="Search here" style="color:wheat;padding-left:25px;margin-left:5px">
			</md-input-container>
			<span flex></span>
			<md-button class="md-icon-button" aria-label="User">
			  <md-tooltip>User</md-tooltip>
			  <img src="images/user.png" style="width:24px;height:24px;"/>
			</md-button>
			<md-button class="md-icon-button" aria-label="Messages">
			  <md-tooltip>Messages</md-tooltip>
			  <img src="images/messages.png" style="width:24px;height:24px;"/>
			</md-button>
		  </div>
		 </md-toolbar>
<!--Tool Bar For Mobile => Media Query defined in style.css file -->
		 <md-toolbar class="mobile">
		  <div class="md-toolbar-tools" data-ng-show="showMobileMainHeader">
			<md-button class="md-icon-button" aria-label="Side Panel" ng-click="openSideNavPanel()">
			  <md-tooltip>Open Side Panel</md-tooltip>
			  <md-icon class="md-default-theme" class="material-icons">menu</md-icon>
			</md-button>
			<md-button class="md-icon-button" aria-label="Icon">
			  <md-tooltip>User</md-tooltip>
			  <md-icon class="md-default-theme" md-svg-icon="images/fb.svg"></md-icon>
			</md-button>
			<h2>
			  <span>TECNOTREE</span>
			</h2>
			<span flex></span>
			<md-button class="md-icon-button" aria-label="Search" data-ng-click="showMobileMainHeader = false">
			  <md-tooltip>Search</md-tooltip>
			  <md-icon class="material-icons">search</md-icon>
			</md-button>
			<md-button class="md-icon-button" aria-label="User">
			  <md-tooltip>User</md-tooltip>
			  <img src="images/user.png" style="width:24px;height:24px;"/>
			</md-button>
			<md-button class="md-icon-button" aria-label="Messages">
			  <md-tooltip>Messages</md-tooltip>
			  <img src="images/messages.png" style="width:24px;height:24px;"/>
			</md-button>
		  </div>
		  <div class="md-toolbar-tools" data-ng-hide="showMobileMainHeader">
			<md-button class="md-icon-button" aria-label="Back" data-ng-click="showMobileMainHeader = true">
			  <md-tooltip>Back</md-tooltip>
			  <md-icon class="material-icons">arrow_back</md-icon>
			</md-button>
			<md-input-container md-no-float class="md-accent" style="padding-bottom:0px;">
			   <input ng-model="searchInput" placeholder="Search here" style="color:wheat;">
			</md-input-container>
			<span flex></span>
			<md-button class="md-icon-button" aria-label="Search">
			  <md-tooltip>Search</md-tooltip>
			  <md-icon class="material-icons">send</md-icon>
			</md-button>
		  </div>
		</md-toolbar>

<!--TOOL BAR ENDED => Different toolbar will be displayed depending on the size of the device, as defined in style.css file. -->

	  <div flex layout="row">
<!-- SLIDER  BEGINNING -->
<!-- SearchCtrl controller is used here. -->
				 <md-sidenav class="md-sidenav-left md-whiteframe-z2" md-component-id="left">
					<md-toolbar layout="row">
					 <div class="md-toolbar-tools">
						<h2>
						  <span>TAMPERE ROUTES</span>
						</h2>
						<span flex></span>
						<md-button class="md-icon-button" aria-label="Close Side Panel" ng-click="closeSideNavPanel()">
						  <md-tooltip>Close Side Panel</md-tooltip>
						  <md-icon class="md-default-theme" class="material-icons">close</md-icon>
						</md-button>
					   </div>
					</md-toolbar>
					<md-content layout-padding="">

<!-- Load all the Stop Data on Load -->
				  <md-list ng-controller="SearchCtrl as ctrl" data-ng-init="ctrl.loadAll()">
					<form name="projectForm">

					  <md-list-item>
						  <md-autocomplete flex="80" required="" md-input-name="autocompleteField" md-no-cache="ctrl.noCache" md-selected-item="ctrl.startPoint" md-search-text="ctrl.searchStart" md-items="item in ctrl.querySearch(ctrl.searchStart)" md-item-text="item.name" md-require-match="" md-floating-label="Start Point">
						  <md-item-template>
							<span md-highlight-text="ctrl.searchText">{{item.name}}</span>
							 <small style="float:right;color:grey;" md-highlight-text="ctrl.searchText">{{item.id}}</small>
						  </md-item-template>
							<div ng-messages="projectForm.autocompleteField.$error" ng-if="(projectForm.autocompleteField.$touched)">
								<div ng-message="required">This is required.</div>
                <div ng-message="md-require-match">Please select an existing stop.</div>
							</div>
						</md-autocomplete>

						<!--  <img ng-src="{{ctrl.arrowImage}}" height="30px" width="30px" alt="swap" ng-click="ctrl.search()">	 -->
						  <md-button ng-disabled="projectForm.$invalid" ng-click="ctrl.swapSearch(projectForm)" flex="15" class="md-icon-button logo" aria-label="Swap">
							  <md-tooltip>Swap</md-tooltip>
							  <img class="logo-image" ng-src="{{ctrl.arrowImage}}">
   						 </md-button>

					  </md-list-item>


					  <md-list-item>
						<md-autocomplete flex="80" ng-pattern="ctrl.searchStart" required="" md-input-name="autocompleteField1" md-no-cache="ctrl.noCache" md-selected-item="ctrl.endPoint" md-search-text="ctrl.searchEnd" md-items="item in ctrl.querySearch(ctrl.searchEnd)" md-item-text="item.name" md-require-match="" md-floating-label="End Point">
						  <md-item-template>
							<span md-highlight-text="ctrl.searchText">{{item.name}}</span>
							  <small style="float:right;color:grey;" md-highlight-text="ctrl.searchText">{{item.id}}</small>
						  </md-item-template>
							<div ng-messages="projectForm.autocompleteField1.$error" ng-if="(projectForm.autocompleteField1.$touched)">
								<div ng-message="required">This is required.</div>
                <div ng-message="md-require-match">Please select an existing stop.</div>
							</div>
						</md-autocomplete>
					  </md-list-item>

          <!--
            <span ng-show="(projectForm.autocompleteField.$modelValue == projectForm.autocompleteField1.$modelValue)">Email does not match.</span>
          -->

					  <md-list-item>
							  <mdp-time-picker flex="100" mdp-placeholder="Time" ng-model="ctrl.currentTime"></mdp-time-picker>
					  </md-list-item>

					  <md-list-item>
						  <div layout="row">
							<md-button ng-disabled="projectForm.$invalid" ng-click="ctrl.search()" class="md-raised md-primary">SEARCH</md-button>
							<md-button ng-click="ctrl.reset(projectForm)" class="md-raised md-primary">RESET</md-button>
						  </div>
					  </md-list-item>

					</form>

					  <md-divider></md-divider>

					  <md-subheader class="md-no-sticky">
							<md-switch  ng-change="ctrl.updateToolTip(ctrl.showDirections)" class="md-primary" ng-model="ctrl.showDirections" aria-label="Switch 1">
								<md-tooltip>{{ctrl.turnDirection}}</md-tooltip>
								 DIRECTIONS
							</md-switch>
					  </md-subheader>

					    <md-list-item ng-hide="!ctrl.showDirections" class="md-3-line" ng-repeat="item in ctrl.showDirectionData" ng-click="null">
								  <img ng-src="{{ctrl.imagePath}}?{{$index}}" class="md-avatar" alt="{{item.stopName}}">
								  <div class="md-list-item-text" layout="column">
									<h3>{{ item.stopName }}</h3>
									<h4>{{ item.stopID }}</h4>
									<p>
										<img ng-src="{{ctrl.timeImage}}?{{$index}}" height="20px" width="20px" alt="{{item.time}}">
										{{ item.time }}
									</p>
								  </div>
							</md-list-item>

				   </md-list>
					</md-content>
				</md-sidenav>
<!-- SLIDER  END -->

<!-- MAP IS DISPLAYED HERE -->
<!-- manageStops controller is used here. -->

				<div layout="column" flex>
				  <div class="box1" ng-controller="manageStops as ctrl" data-ng-init="ctrl.updateAllBuses()">

					<ui-gmap-google-map center='ctrl.map.center' zoom='ctrl.map.zoom' control="ctrl.map.control">

            <ui-gmap-window
              show="ctrl.window.show"
              coords="ctrl.window.model.coords"
              closeClick="ctrl.window.closeClick()"
              templateUrl="'images/template/infowindow.tpl.html'"
              templateParameter="ctrl.window">
            </ui-gmap-window>

						  <ui-gmap-markers events="ctrl.markersEvents" models="ctrl.markers" coords="'coords'" icon="'icon'" modelsbyref="false"/>

					</ui-gmap-google-map>

				  </div>

				</div>
<!-- MAP END -->

  </div>


</body>
</html>
